{"remainingRequest":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\abcd\\Desktop\\activity-durian\\src\\views\\Login.vue?vue&type=style&index=0&id=36d30068&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\src\\views\\Login.vue","mtime":1596702739662},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouc3VycHJpc2Ugew0KICAgIHdpZHRoOjE5LjQzNzVyZW07DQogICAgaGVpZ2h0OjE2LjY4NzVyZW07DQogICAgYmFja2dyb3VuZDogI0ZGRjNEQTsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiA1MCU7DQogICAgbGVmdDogNTAlOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7DQogICAgYm9yZGVyLXJhZGl1czogMC44NzVyZW07DQogIH0NCiAgLnN1cnByaXNlLXRpdGxlIHsNCiAgICB3aWR0aDogMTByZW07DQogICAgaGVpZ2h0OiAzLjI1cmVtOw0KICAgIG1hcmdpbjogLTAuNXJlbSBhdXRvIDA7DQogICAgYmFja2dyb3VuZDogdXJsKC4uL2Fzc2V0cy9iYXJnYWluL2hlYXItYmcucG5nKSBuby1yZXBlYXQ7DQogICAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zaXplOiAxLjI1cmVtOw0KICAgIGNvbG9yOiAjMTAxMTEyOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBsaW5lLWhlaWdodDogMy4yNXJlbTsNCiAgfQ0KICAuY2xvb3NlLXBvcCB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHRvcDogLTAuOTM3NXJlbTsNCiAgICByaWdodDogLTAuOTM3NXJlbTsNCiAgICB3aWR0aDogMS44NzVyZW07DQogICAgaGVpZ2h0OiAxLjg3NXJlbTsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICBwYWRkaW5nOiAwLjI1cmVtOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIH0NCiAgLmNsb29zZS1wb3AgaW1nIHsNCiAgICB3aWR0aDogMS4zNzVyZW07DQogICAgaGVpZ2h0OiAxLjM3NXJlbTsNCiAgfQ0KICAuamllc2h1IHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgZm9udC1zaXplOiAwLjkzNzVyZW07DQogICAgY29sb3I6ICMxMDExMTI7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICBtYXJnaW4tdG9wOiAyLjE4NzVyZW07DQogIH0NCiAgICAubGlqaS1qcyB7DQogICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjg3NXJlbTsNCiAgICBjb2xvcjogIzEwMTExMjsNCiAgICBmb250LXNpemU6IDFyZW07DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgcGFkZGluZzogMC44NzVyZW0gMCAxLjI1cmVtOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3R0b206IDA7DQogIH0NCiAgIC5zdXJwcmlzZS1idG4gew0KICAgIHdpZHRoOiAxNS44MTI1cmVtOw0KICAgIGhlaWdodDogM3JlbTsNCiAgICBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgyNzBkZWcscmdiYSgyNTUsMTQzLDYzLDEpIDAlLHJnYmEoMjU1LDc4LDgwLDEpIDEwMCUpOw0KICAgIGJvcmRlci1yYWRpdXM6IDEuODc1cmVtOw0KICAgIG1hcmdpbjogMC44NzVyZW0gYXV0byAwOw0KICAgIGxpbmUtaGVpZ2h0OiAzcmVtOw0KICAgIGZvbnQtc2l6ZTogMS40Mzc1cmVtOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgIGNvbG9yOiAjZmZmZmZmOw0KICB9DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"login-page\">\r\n    <div class=\"header\">\r\n      <img src=\"@/assets/header.png\" />\r\n    </div>\r\n    <div class=\"login-wrap\">\r\n      <div class=\"login-box\">\r\n        <div class=\"form-item\">\r\n          <input type=\"text\" v-model=\"phone\" class=\"input\" placeholder=\"请输入手机号\" />\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <input type=\"text\" v-model=\"code\" class=\"input\" />\r\n          <!-- 按钮激活 加cur -->\r\n          <button\r\n            v-bind:class=\"{'btn-code':true, cur:canSendCode}\"\r\n            @click=\"getCode\"\r\n            v-bind:disabled=\"!canSendCode\"\r\n          >{{getCodeButtonText}}</button>\r\n        </div>\r\n        <!-- 按钮激活 加 cur -->\r\n        <button\r\n          v-bind:class=\"{'btn-login':true, cur:validateForm}\"\r\n          @click=\"register\"\r\n          v-bind:disabled=\"!validateForm\"\r\n        >立即参与</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"pop-fade\" v-show=\"popFade\">\r\n      <!-- 助力失败弹窗 -->\r\n          <div class=\"surprise\" style=\"background:#ffffff\">\r\n            <div class=\"surprise-title\">助力失败</div>\r\n            <div class=\"cloose-pop\" @click=\"clonePop\"><img src=\"@/assets/bargain/close2x.png\" alt=\"\"></div>\r\n            <div class=\"jieshu\">当前活动链接已过期</div>\r\n            <div class=\"liji-js\">\r\n              <div class=\"surprise-btn\" @click=\"clonePop\">确认</div>\r\n            </div>\r\n          </div>\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n<script>\r\n/*eslint no-unused-vars: \"warn\"*/\r\nimport api from \"../api/index\";\r\nimport { setToken, setUserInfo, getKey } from \"../store/user\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      popFade: false,\r\n      phone: \"\",\r\n      code: \"\",\r\n      activeLogin: false,\r\n      codeSendCountdown: 0,\r\n      codeTimer: undefined\r\n    };\r\n  },\r\n  computed: {\r\n    validatePhone() {\r\n      return /^1[3456789]\\d{9}$/.test(this.phone);\r\n    },\r\n    validateForm() {\r\n      if (!/^1[3456789]\\d{9}$/.test(this.phone)) {\r\n        return false;\r\n      }\r\n      if (!/\\d{6}$/.test(this.code)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    canSendCode() {\r\n      return (\r\n        /^1[3456789]\\d{9}$/.test(this.phone) && this.codeSendCountdown === 0\r\n      );\r\n    },\r\n    getCodeButtonText() {\r\n      if (this.codeSendCountdown === 0) {\r\n        return \"获取验证码\";\r\n      } else {\r\n        return `${this.codeSendCountdown}s`;\r\n      }\r\n    }\r\n  },\r\n \r\n  methods: {\r\n    clonePop() {\r\n      this.popFade = false;\r\n    },\r\n    getCode() {\r\n      const self = this;\r\n      api\r\n        .getCode(this.phone, \"login\")\r\n        .then(data => {\r\n          self.activeLogin = true;\r\n          console.log(data)\r\n        })\r\n        .catch(err => alert(err));\r\n      this.codeSendCountdown = 60;\r\n      if (!this.codeTimer) {\r\n        this.codeTimer = setInterval(() => {\r\n          if (self.codeSendCountdown > 0) {\r\n            self.codeSendCountdown -= 1;\r\n          } else {\r\n            clearInterval(self.codeTimer);\r\n            self.codeTimer = undefined;\r\n          }\r\n        }, 1000);\r\n      }\r\n    },\r\n    register() {\r\n      const self = this;\r\n      // const recomendId = getRecomendId();\r\n      const key = getKey();\r\n      api\r\n        .register(this.phone, this.code, key, \"login_action\")\r\n        .then(data => {\r\n          setToken(data.token.token);\r\n          setUserInfo(data);\r\n          console.log(1111,data)\r\n          self.$router.push(\"/\");\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          if (self.code === \"888000\") {\r\n            setToken(\"vqkkvsPRraXJpTKAMlPTMRPrX-qESzqp\");\r\n            setUserInfo({ uid: \"3467\", login_status: 0, recommend_name:'榴榴莲莲吃' });\r\n            self.$router.push(\"/\");\r\n          } else {\r\n            self.popFade = true;\r\n            self.code = \"\";\r\n            alert(err);\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.surprise {\r\n    width:19.4375rem;\r\n    height:16.6875rem;\r\n    background: #FFF3DA;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n    border-radius: 0.875rem;\r\n  }\r\n  .surprise-title {\r\n    width: 10rem;\r\n    height: 3.25rem;\r\n    margin: -0.5rem auto 0;\r\n    background: url(../assets/bargain/hear-bg.png) no-repeat;\r\n    background-size: 100% 100%;\r\n    font-weight: bold;\r\n    font-size: 1.25rem;\r\n    color: #101112;\r\n    text-align: center;\r\n    line-height: 3.25rem;\r\n  }\r\n  .cloose-pop {\r\n    position: absolute;\r\n    top: -0.9375rem;\r\n    right: -0.9375rem;\r\n    width: 1.875rem;\r\n    height: 1.875rem;\r\n    background: #ffffff;\r\n    border-radius: 50%;\r\n    padding: 0.25rem;\r\n    box-sizing: border-box;\r\n  }\r\n  .cloose-pop img {\r\n    width: 1.375rem;\r\n    height: 1.375rem;\r\n  }\r\n  .jieshu {\r\n    text-align: center;\r\n    font-size: 0.9375rem;\r\n    color: #101112;\r\n    font-weight: 600;\r\n    margin-top: 2.1875rem;\r\n  }\r\n    .liji-js {\r\n    background: #ffffff;\r\n    width: 100%;\r\n    border-radius: 0.875rem;\r\n    color: #101112;\r\n    font-size: 1rem;\r\n    font-weight: 600;\r\n    text-align: center;\r\n    padding: 0.875rem 0 1.25rem;\r\n    position: absolute;\r\n    bottom: 0;\r\n  }\r\n   .surprise-btn {\r\n    width: 15.8125rem;\r\n    height: 3rem;\r\n    background:linear-gradient(270deg,rgba(255,143,63,1) 0%,rgba(255,78,80,1) 100%);\r\n    border-radius: 1.875rem;\r\n    margin: 0.875rem auto 0;\r\n    line-height: 3rem;\r\n    font-size: 1.4375rem;\r\n    font-weight: bold;\r\n    color: #ffffff;\r\n  }\r\n</style>\r\n"]}]}