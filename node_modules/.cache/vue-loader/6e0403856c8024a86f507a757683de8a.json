{"remainingRequest":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\abcd\\Desktop\\activity-durian\\src\\components\\Geet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\src\\components\\Geet.vue","mtime":1597229869809},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\activity-durian\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHt9Ow0KICB9LA0KICAvLyAgIOaOpeWPl+eItue7hOS7tuS8oOmAkueahOWAvO+8jOeUqOadpeaOp+WItuWbvuW9oumqjOivgeeahOWKoOi9vQ0KICBwcm9wczogWyJpc0dlZXQiXSwNCiAgbWV0aG9kczogew0KICAgIEd0Q2FwdGNoYSgpIHsNCiAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICAvLyAgIOatpHVybOaYr+aegemqjOWumOe9keeahOa1i+ivleivt+axguWcsOWdgO+8jOWKoOmaj+acuuaVsOmYsuatoue8k+WtmA0KICAgICAgX3RoaXMuYXhpb3MNCiAgICAgICAgLnBvc3QoDQogICAgICAgICAgImh0dHBzOi8vYXBpLm1lbmdkaWd1YS5jbi9tZW1iZXIvYWN0aW9uL2ZpcnN0LXJlZ2lzdGVyP3Q9IiArDQogICAgICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKQ0KICAgICAgICApDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coIjEs6aG16Z2i5Yid5aeL5YyW77yM6LCD55So5p6B6aqM5o6l5Y+jMe+8jOi/m+ihjOWbvuW9oumqjOivgeeggeeahOWKoOi9vSIpOw0KICAgICAgICAgIC8vIOaegemqjOesrOS4gOasoe+8jOivt+axguWbnuadpeeahOWPguaVsA0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICB2YXIgaGFuZGxlckVtYmVkID0gZnVuY3Rpb24oY2FwdGNoYU9iaikgew0KICAgICAgICAgICAgLy8gICDlm77lvaLpqozor4HmiJDlip8NCiAgICAgICAgICAgIGNhcHRjaGFPYmoNCiAgICAgICAgICAgICAgLm9uU3VjY2VzcyhmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FwdGNoYU9iai5nZXRWYWxpZGF0ZSgpOw0KICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCcxMjMnLHJlc3VsdCkNCiAgICAgICAgICAgICAgICBsZXQgcGFyYW0gPSB7DQogICAgICAgICAgICAgICAgICBnZWV0ZXN0X2NoYWxsZW5nZTogcmVzdWx0LmdlZXRlc3RfY2hhbGxlbmdlLA0KICAgICAgICAgICAgICAgICAgZ2VldGVzdF92YWxpZGF0ZTogcmVzdWx0LmdlZXRlc3RfdmFsaWRhdGUsDQogICAgICAgICAgICAgICAgICBnZWV0ZXN0X3NlY2NvZGU6IHJlc3VsdC5nZWV0ZXN0X3NlY2NvZGUsDQogICAgICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuc3VjY2Vzcw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgLy8g5p6B6aqM5qCh6aqM55qE5Y+C5pWw77yM5bCG5YW25Lyg57uZ5pyN5Yqh56uv77yM6L+b6KGM5qCh6aqM44CCDQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgLy8gICAiM++8jOWbvuW9oumqjOivgemAmui/h++8jOWwhuaVsOaNruS8oOmAkue7meeItue7hOS7tu+8jOi/m+ihjOacjeWKoeerr+mqjOivgSINCiAgICAgICAgICAgICAgICAvLyApOw0KICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCJnZWV0UGF0aCIsIHBhcmFtKTsNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLm9uRXJyb3IoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgLy8gICDlm77lvaLpqozor4HlpLHotKUNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAvLyAgIOS4uuatpOmhtemdoueahOiZmuaLn+aMiemSrua3u+WKoOeCueWHu+S6i+S7tg0KICAgICAgICAgICAgX3RoaXMuJHJlZnMuYnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gZGVtbygpIHsNCiAgICAgICAgICAgICAgLy8g5p6B6aqM5Zu+54mH6Kem5Y+R5LmL5ZCO77yM5L+u5pS55o6n5Yi25Y+Y6YeP6aKd5biD5bCU5YC877yM5a6e546w5YaN5qyh6Kem5Y+RDQogICAgICAgICAgICAgIF90aGlzLiRlbWl0KCJjbGlja0NoYW5nZSIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgaWYgKF90aGlzLmlzR2VldCkgew0KICAgICAgICAgICAgICAgIGNhcHRjaGFPYmoudmVyaWZ5KCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH07DQogICAgICAgICAgLy8gICDliJ3lp4vljJbmnoHpqowNCiAgICAgICAgICBfdGhpcy4kaW5pdEdlZXQoDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGd0OiBkYXRhLmRhdGEuZ3QsDQogICAgICAgICAgICAgIGNoYWxsZW5nZTogZGF0YS5kYXRhLmNoYWxsZW5nZSwNCiAgICAgICAgICAgICAgcHJvZHVjdDogImJpbmQiLA0KICAgICAgICAgICAgICBvZmZsaW5lOiAhZGF0YS5kYXRhLnN1Y2Nlc3MsDQogICAgICAgICAgICAgIGh0dHBzOiB0cnVlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgaGFuZGxlckVtYmVkDQogICAgICAgICAgKTsNCiAgICAgICAgfSk7DQogICAgfQ0KICB9LA0KDQogIGNvbXB1dGVkOiB7fSwNCg0KICBjcmVhdGVkKCkgew0KICAgIC8vIOmhtemdouWIm+W7uu+8jOiwg+eUqOWHveaVsA0KICAgIHRoaXMuR3RDYXB0Y2hhKCk7DQogIH0sDQoNCiAgbW91bnRlZCgpIHt9LA0KICB3YXRjaDogew0KICAgIC8vIOebkeWQrOWPguaVsOeahOWPmOWMlu+8jOiwg+eUqOaegemqjA0KICAgIGlzR2VldDogZnVuY3Rpb24oKSB7DQogICAgICAvLyAgIOi/memHjOmAmui/h+aMiemSruS6i+S7tuiwg+eUqOaegemqjA0KICAgICAgdGhpcy4kcmVmcy5idG4uY2xpY2soKTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["Geet.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Geet.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <i ref=\"btn\"></i>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  //   接受父组件传递的值，用来控制图形验证的加载\r\n  props: [\"isGeet\"],\r\n  methods: {\r\n    GtCaptcha() {\r\n      let _this = this;\r\n      //   此url是极验官网的测试请求地址，加随机数防止缓存\r\n      _this.axios\r\n        .post(\r\n          \"https://api.mengdigua.cn/member/action/first-register?t=\" +\r\n            new Date().getTime()\r\n        )\r\n        .then(res => {\r\n          // console.log(\"1,页面初始化，调用极验接口1，进行图形验证码的加载\");\r\n          // 极验第一次，请求回来的参数\r\n          // console.log(res);\r\n          let data = res.data;\r\n          var handlerEmbed = function(captchaObj) {\r\n            //   图形验证成功\r\n            captchaObj\r\n              .onSuccess(function() {\r\n                var result = captchaObj.getValidate();\r\n                // console.log('123',result)\r\n                let param = {\r\n                  geetest_challenge: result.geetest_challenge,\r\n                  geetest_validate: result.geetest_validate,\r\n                  geetest_seccode: result.geetest_seccode,\r\n                  status: data.success\r\n                };\r\n                // 极验校验的参数，将其传给服务端，进行校验。\r\n                // console.log(\r\n                //   \"3，图形验证通过，将数据传递给父组件，进行服务端验证\"\r\n                // );\r\n                _this.$emit(\"geetPath\", param);\r\n              })\r\n              .onError(function() {\r\n                //   图形验证失败\r\n              });\r\n            //   为此页面的虚拟按钮添加点击事件\r\n            _this.$refs.btn.addEventListener(\"click\", function demo() {\r\n              // 极验图片触发之后，修改控制变量额布尔值，实现再次触发\r\n              _this.$emit(\"clickChange\", false);\r\n              if (_this.isGeet) {\r\n                captchaObj.verify();\r\n              }\r\n            });\r\n          };\r\n          //   初始化极验\r\n          _this.$initGeet(\r\n            {\r\n              gt: data.data.gt,\r\n              challenge: data.data.challenge,\r\n              product: \"bind\",\r\n              offline: !data.data.success,\r\n              https: true\r\n            },\r\n            handlerEmbed\r\n          );\r\n        });\r\n    }\r\n  },\r\n\r\n  computed: {},\r\n\r\n  created() {\r\n    // 页面创建，调用函数\r\n    this.GtCaptcha();\r\n  },\r\n\r\n  mounted() {},\r\n  watch: {\r\n    // 监听参数的变化，调用极验\r\n    isGeet: function() {\r\n      //   这里通过按钮事件调用极验\r\n      this.$refs.btn.click();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped></style>\r\n"]}]}