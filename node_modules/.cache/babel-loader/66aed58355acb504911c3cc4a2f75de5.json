{"remainingRequest":"C:\\Users\\abcd\\Desktop\\newPeople\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\abcd\\Desktop\\newPeople\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\abcd\\Desktop\\newPeople\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\abcd\\Desktop\\newPeople\\src\\utils\\request.js","mtime":1600854782256},{"path":"C:\\Users\\abcd\\Desktop\\newPeople\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\newPeople\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\newPeople\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGdldFRva2VuLCBjbGVhclRva2VuIH0gZnJvbSAiQC9zdG9yZS91c2VyIjsgLy8gY3JlYXRlIGFuIGF4aW9zIGluc3RhbmNlCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgLy8gYmFzZVVSTDogImh0dHA6Ly90MS5tZW5nZGlndWEuY24vIiwKICAvLyBiYXNlVVJMOiAiaHR0cDovLzE5Mi4xNjguNS45ODo4MDg3LyIsCiAgYmFzZVVSTDogImh0dHBzOi8vdDMubWVuZ2RpZ3VhLmNuLyIsCiAgLy8gYmFzZVVSTDogImh0dHBzOi8vYXBpLXRlc3QubWVuZ2RpZ3VhLmNuLyIsCiAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLCAvLyBzZW5kIGNvb2tpZXMgd2hlbiBjcm9zcy1kb21haW4gcmVxdWVzdHMKICB0aW1lb3V0OiA1MDAwIC8vIHJlcXVlc3QgdGltZW91dAoKfSk7IC8vIHJlcXVlc3QgaW50ZXJjZXB0b3IKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyBkbyBzb21ldGhpbmcgYmVmb3JlIHJlcXVlc3QgaXMgc2VudAogIHZhciB0b2tlbiA9IGdldFRva2VuKCk7CgogIGlmICh0b2tlbikgewogICAgLy8gbGV0IGVhY2ggcmVxdWVzdCBjYXJyeSB0b2tlbgogICAgLy8gWydYLVRva2VuJ10gaXMgYSBjdXN0b20gaGVhZGVycyBrZXkKICAgIC8vIHBsZWFzZSBtb2RpZnkgaXQgYWNjb3JkaW5nIHRvIHRoZSBhY3R1YWwgc2l0dWF0aW9uCiAgICBjb25maWcuZGF0YVsidG9rZW4iXSA9IHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gZG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIGNvbnNvbGUubG9nKDExMSwgZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCi8qKg0KICogSWYgeW91IHdhbnQgdG8gZ2V0IGh0dHAgaW5mb3JtYXRpb24gc3VjaCBhcyBoZWFkZXJzIG9yIHN0YXR1cw0KICogUGxlYXNlIHJldHVybiAgcmVzcG9uc2UgPT4gcmVzcG9uc2UNCiAqLwoKLyoqDQogKiBEZXRlcm1pbmUgdGhlIHJlcXVlc3Qgc3RhdHVzIGJ5IGN1c3RvbSBjb2RlDQogKiBIZXJlIGlzIGp1c3QgYW4gZXhhbXBsZQ0KICogWW91IGNhbiBhbHNvIGp1ZGdlIHRoZSBzdGF0dXMgYnkgSFRUUCBTdGF0dXMgQ29kZQ0KICovCmZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOyAvLyBpZiB0aGUgY3VzdG9tIGNvZGUgaXMgbm90IDIwMDAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCgogIGlmIChyZXMuZXJyY29kZSAhPT0gMCkgewogICAgLy8gNTAwMDg6IElsbGVnYWwgdG9rZW47IDUwMDEyOiBPdGhlciBjbGllbnRzIGxvZ2dlZCBpbjsgNTAwMTQ6IFRva2VuIGV4cGlyZWQ7CiAgICBpZiAocmVzLmVycmNvZGUgPT09IDUwMDA4IHx8IHJlcy5lcnJjb2RlID09PSA1MDAxMiB8fCByZXMuZXJyY29kZSA9PT0gNTAwMTQgfHwgcmVzLmVycmNvZGUgPT09IDEwMDAwKSB7CiAgICAgIC8vIHRvIHJlLWxvZ2luCiAgICAgIGNsZWFyVG9rZW4oKTsgLy8gbG9jYXRpb24ucmVsb2FkKCk7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMuZXJybXNnIHx8ICJFcnJvciIpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coImVyciIgKyBlcnJvcik7IC8vIGZvciBkZWJ1ZwoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["C:/Users/abcd/Desktop/newPeople/src/utils/request.js"],"names":["axios","getToken","clearToken","service","create","baseURL","timeout","interceptors","request","use","config","token","data","error","console","log","Promise","reject","response","res","errcode","Error","errmsg"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,cAArC,C,CAEA;;AACA,IAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC3B;AACA;AACAC,EAAAA,OAAO,EAAE,0BAHkB;AAI3B;AACA;AACAC,EAAAA,OAAO,EAAE,IANkB,CAMZ;;AANY,CAAb,CAAhB,C,CASA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAACC,MAAD,EAAY;AACV;AACA,MAAMC,KAAK,GAAGV,QAAQ,EAAtB;;AACA,MAAIU,KAAJ,EAAW;AACT;AACA;AACA;AACAD,IAAAA,MAAM,CAACE,IAAP,CAAY,OAAZ,IAAuBD,KAAvB;AACD;;AACD,SAAOD,MAAP;AACD,CAXH,EAYE,UAACG,KAAD,EAAW;AACT;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAgBF,KAAhB,EAFS,CAEe;;AACxB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAhBH,E,CAmBA;;AACAV,OAAO,CAACI,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B;AACE;;;;;AAKA;;;;;AAKA,UAACS,QAAD,EAAc;AACZ,MAAMC,GAAG,GAAGD,QAAQ,CAACN,IAArB,CADY,CAGZ;;AACA,MAAIO,GAAG,CAACC,OAAJ,KAAgB,CAApB,EAAuB;AACrB;AACA,QACED,GAAG,CAACC,OAAJ,KAAgB,KAAhB,IACAD,GAAG,CAACC,OAAJ,KAAgB,KADhB,IAEAD,GAAG,CAACC,OAAJ,KAAgB,KAFhB,IAGAD,GAAG,CAACC,OAAJ,KAAgB,KAJlB,EAKE;AACA;AACAlB,MAAAA,UAAU,GAFV,CAGA;AACD;;AACD,WAAOc,OAAO,CAACC,MAAR,CAAe,IAAII,KAAJ,CAAUF,GAAG,CAACG,MAAJ,IAAc,OAAxB,CAAf,CAAP;AACD,GAbD,MAaO;AACL,WAAOH,GAAG,CAACP,IAAX;AACD;AACF,CA/BH,EAgCE,UAACC,KAAD,EAAW;AACTC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADS,CACmB;;AAC5B,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAnCH;AAsCA,eAAeV,OAAf","sourcesContent":["import axios from \"axios\";\r\nimport { getToken, clearToken } from \"@/store/user\";\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  // baseURL: \"http://t1.mengdigua.cn/\",\r\n  // baseURL: \"http://192.168.5.98:8087/\",\r\n  baseURL: \"https://t3.mengdigua.cn/\",\r\n  // baseURL: \"https://api-test.mengdigua.cn/\",\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 5000, // request timeout\r\n});\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  (config) => {\r\n    // do something before request is sent\r\n    const token = getToken();\r\n    if (token) {\r\n      // let each request carry token\r\n      // ['X-Token'] is a custom headers key\r\n      // please modify it according to the actual situation\r\n      config.data[\"token\"] = token;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // do something with request error\r\n    console.log(111,error); // for debug\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n   */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  (response) => {\r\n    const res = response.data;\r\n\r\n    // if the custom code is not 20000, it is judged as an error.\r\n    if (res.errcode !== 0) {\r\n      // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\r\n      if (\r\n        res.errcode === 50008 ||\r\n        res.errcode === 50012 ||\r\n        res.errcode === 50014 ||\r\n        res.errcode === 10000\r\n      ) {\r\n        // to re-login\r\n        clearToken();\r\n        // location.reload();\r\n      }\r\n      return Promise.reject(new Error(res.errmsg || \"Error\"));\r\n    } else {\r\n      return res.data;\r\n    }\r\n  },\r\n  (error) => {\r\n    console.log(\"err\" + error); // for debug\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n"]}]}