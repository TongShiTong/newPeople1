{"remainingRequest":"C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\src\\utils\\request.js","mtime":1600219461653},{"path":"C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\abcd\\Desktop\\新建文件夹 (2)\\activity-coupon\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGdldFRva2VuLCBjbGVhclRva2VuIH0gZnJvbSAiQC9zdG9yZS91c2VyIjsgLy8gY3JlYXRlIGFuIGF4aW9zIGluc3RhbmNlCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgLy8gYmFzZVVSTDogImh0dHA6Ly90MS5tZW5nZGlndWEuY24vIiwKICAvLyBiYXNlVVJMOiAiaHR0cDovLzE5Mi4xNjguNS45ODo4MDg3LyIsCiAgYmFzZVVSTDogImh0dHA6Ly90My5tZW5nZGlndWEuY24vIiwKICAvLyBiYXNlVVJMOiAiaHR0cHM6Ly9hcGktdGVzdC5tZW5nZGlndWEuY24vIiwKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIC8vIHNlbmQgY29va2llcyB3aGVuIGNyb3NzLWRvbWFpbiByZXF1ZXN0cwogIHRpbWVvdXQ6IDUwMDAgLy8gcmVxdWVzdCB0aW1lb3V0Cgp9KTsgLy8gcmVxdWVzdCBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIGRvIHNvbWV0aGluZyBiZWZvcmUgcmVxdWVzdCBpcyBzZW50CiAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTsKCiAgaWYgKHRva2VuKSB7CiAgICAvLyBsZXQgZWFjaCByZXF1ZXN0IGNhcnJ5IHRva2VuCiAgICAvLyBbJ1gtVG9rZW4nXSBpcyBhIGN1c3RvbSBoZWFkZXJzIGtleQogICAgLy8gcGxlYXNlIG1vZGlmeSBpdCBhY2NvcmRpbmcgdG8gdGhlIGFjdHVhbCBzaXR1YXRpb24KICAgIGNvbmZpZy5kYXRhWyJ0b2tlbiJdID0gdG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBkbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coMTExLCBlcnJvcik7IC8vIGZvciBkZWJ1ZwoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8gcmVzcG9uc2UgaW50ZXJjZXB0b3IKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgKLyoqDQogKiBJZiB5b3Ugd2FudCB0byBnZXQgaHR0cCBpbmZvcm1hdGlvbiBzdWNoIGFzIGhlYWRlcnMgb3Igc3RhdHVzDQogKiBQbGVhc2UgcmV0dXJuICByZXNwb25zZSA9PiByZXNwb25zZQ0KICovCgovKioNCiAqIERldGVybWluZSB0aGUgcmVxdWVzdCBzdGF0dXMgYnkgY3VzdG9tIGNvZGUNCiAqIEhlcmUgaXMganVzdCBhbiBleGFtcGxlDQogKiBZb3UgY2FuIGFsc28ganVkZ2UgdGhlIHN0YXR1cyBieSBIVFRQIFN0YXR1cyBDb2RlDQogKi8KZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7IC8vIGlmIHRoZSBjdXN0b20gY29kZSBpcyBub3QgMjAwMDAsIGl0IGlzIGp1ZGdlZCBhcyBhbiBlcnJvci4KCiAgaWYgKHJlcy5lcnJjb2RlICE9PSAwKSB7CiAgICAvLyA1MDAwODogSWxsZWdhbCB0b2tlbjsgNTAwMTI6IE90aGVyIGNsaWVudHMgbG9nZ2VkIGluOyA1MDAxNDogVG9rZW4gZXhwaXJlZDsKICAgIGlmIChyZXMuZXJyY29kZSA9PT0gNTAwMDggfHwgcmVzLmVycmNvZGUgPT09IDUwMDEyIHx8IHJlcy5lcnJjb2RlID09PSA1MDAxNCB8fCByZXMuZXJyY29kZSA9PT0gMTAwMDApIHsKICAgICAgLy8gdG8gcmUtbG9naW4KICAgICAgY2xlYXJUb2tlbigpOyAvLyBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5lcnJtc2cgfHwgIkVycm9yIikpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzLmRhdGE7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygiZXJyIiArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["C:/Users/abcd/Desktop/新建文件夹 (2)/activity-coupon/src/utils/request.js"],"names":["axios","getToken","clearToken","service","create","baseURL","timeout","interceptors","request","use","config","token","data","error","console","log","Promise","reject","response","res","errcode","Error","errmsg"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,cAArC,C,CAEA;;AACA,IAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC3B;AACA;AACAC,EAAAA,OAAO,EAAE,yBAHkB;AAI3B;AACA;AACAC,EAAAA,OAAO,EAAE,IANkB,CAMZ;;AANY,CAAb,CAAhB,C,CASA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAACC,MAAD,EAAY;AACV;AACA,MAAMC,KAAK,GAAGV,QAAQ,EAAtB;;AACA,MAAIU,KAAJ,EAAW;AACT;AACA;AACA;AACAD,IAAAA,MAAM,CAACE,IAAP,CAAY,OAAZ,IAAuBD,KAAvB;AACD;;AACD,SAAOD,MAAP;AACD,CAXH,EAYE,UAACG,KAAD,EAAW;AACT;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAgBF,KAAhB,EAFS,CAEe;;AACxB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAhBH,E,CAmBA;;AACAV,OAAO,CAACI,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B;AACE;;;;;AAKA;;;;;AAKA,UAACS,QAAD,EAAc;AACZ,MAAMC,GAAG,GAAGD,QAAQ,CAACN,IAArB,CADY,CAGZ;;AACA,MAAIO,GAAG,CAACC,OAAJ,KAAgB,CAApB,EAAuB;AACrB;AACA,QACED,GAAG,CAACC,OAAJ,KAAgB,KAAhB,IACAD,GAAG,CAACC,OAAJ,KAAgB,KADhB,IAEAD,GAAG,CAACC,OAAJ,KAAgB,KAFhB,IAGAD,GAAG,CAACC,OAAJ,KAAgB,KAJlB,EAKE;AACA;AACAlB,MAAAA,UAAU,GAFV,CAGA;AACD;;AACD,WAAOc,OAAO,CAACC,MAAR,CAAe,IAAII,KAAJ,CAAUF,GAAG,CAACG,MAAJ,IAAc,OAAxB,CAAf,CAAP;AACD,GAbD,MAaO;AACL,WAAOH,GAAG,CAACP,IAAX;AACD;AACF,CA/BH,EAgCE,UAACC,KAAD,EAAW;AACTC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADS,CACmB;;AAC5B,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAnCH;AAsCA,eAAeV,OAAf","sourcesContent":["import axios from \"axios\";\r\nimport { getToken, clearToken } from \"@/store/user\";\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  // baseURL: \"http://t1.mengdigua.cn/\",\r\n  // baseURL: \"http://192.168.5.98:8087/\",\r\n  baseURL: \"http://t3.mengdigua.cn/\",\r\n  // baseURL: \"https://api-test.mengdigua.cn/\",\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 5000, // request timeout\r\n});\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  (config) => {\r\n    // do something before request is sent\r\n    const token = getToken();\r\n    if (token) {\r\n      // let each request carry token\r\n      // ['X-Token'] is a custom headers key\r\n      // please modify it according to the actual situation\r\n      config.data[\"token\"] = token;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // do something with request error\r\n    console.log(111,error); // for debug\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n   */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  (response) => {\r\n    const res = response.data;\r\n\r\n    // if the custom code is not 20000, it is judged as an error.\r\n    if (res.errcode !== 0) {\r\n      // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\r\n      if (\r\n        res.errcode === 50008 ||\r\n        res.errcode === 50012 ||\r\n        res.errcode === 50014 ||\r\n        res.errcode === 10000\r\n      ) {\r\n        // to re-login\r\n        clearToken();\r\n        // location.reload();\r\n      }\r\n      return Promise.reject(new Error(res.errmsg || \"Error\"));\r\n    } else {\r\n      return res.data;\r\n    }\r\n  },\r\n  (error) => {\r\n    console.log(\"err\" + error); // for debug\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n"]}]}